#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "textbuffer.h"

#define TRUE 1
#define FALSE 0

int main(int argc, char *argv[]) {
    /*
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Initialising a new TB multi-line\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("\"line 01\\nline 02\\nline 03\\nline 04\\nline 05\\nline 06\\nline 07\\nline 08\\nline 09\\nline 10\\n\"\n");
    char str[] = "line 01\n"
                 "line 02\n"
                 "line 03\n"
                 "line 04\n"
                 "line 05\n"
                 "line 06\n"
                 "line 07\n"
                 "line 08\n"
                 "line 09\n"
                 "line 10\n";
    TB tb = newTB(str);
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Dumping the TB without line numbers\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("%s", dumpTB(tb, 0));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Dumping the TB with line numbers\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Showing the number of lines in the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("%d\n", linesTB(tb));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Adding the prefix \"This is \" to every line in the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    addPrefixTB(tb, 0, 9, "This is ");
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Delete lines 1 to 5, inclusive, of the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    deleteTB(tb, 0, 4);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Cut the last two lines of the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    TB cut = cutTB(tb, 3, 4);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Paste the cut lines at the beginning of the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    pasteTB(tb, 0, cut);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Merge the cut TB at the end of the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    mergeTB(tb, 5, cut);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Undo the previous 4 operations on the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    undoTB(tb);
    undoTB(tb);
    undoTB(tb);
    undoTB(tb);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Attempt to undo once more on the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    undoTB(tb);
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Redo the previous two undo operations on the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    redoTB(tb);
    redoTB(tb);
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Add prefix of \"Howdy \" to the first line of the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    addPrefixTB(tb, 0, 0, "Howdy ");
    printf("%s", dumpTB(tb, 1));
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Attempt to redo on the changed TB, which should not work\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    redoTB(tb);
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("Search for all instances of \"line\" in the TB\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    Match curr = searchTB(tb, "line");
    while (curr != NULL) {
        printf("Line number: %d, Character Index: %d\n", curr->lineNumber, curr->charIndex);
        curr = curr->next;
    }
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("WHITEBOX TESTING\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    printf("||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||\n");
    printf("--------------------------------------------------------------------------------------------------------\n");
    */
    whiteBoxTests();
    /*
    char str1[] = "01\n"
                  "02\n"
                  "03\n"
                  "04\n"
                  "05\n"
                  "06\n"
                  "07\n"
                  "08\n"
                  "09\n"
                  "10\n";
    TB tb1 = newTB(str1);
    //addPrefixTB(tb1, 0, 3, "Hi there ");
    char *s = dumpTB(tb, 1);
    printf("%s", s);
    deleteTB(tb1, 0, 0);
    deleteTB(tb1, 0, 0);
    deleteTB(tb1, 0, 0);
    deleteTB(tb1, 0, 0);
    undoTB(tb1);
    undoTB(tb1);
    formRichText(tb1);
    redoTB(tb1);
    s = dumpTB(tb1, 1);
    printf("%s", s);
    Match curr = searchTB(tb3, "how");
    while (curr != NULL) {
        printf("Line number: %d, charIndex: %d\n", curr->lineNumber, curr->charIndex);
        curr = curr->next;
    }
    char *diff = diffTB(tb1, tb2);
    printf("%s", diff);
    */
    //releaseTB(tb);
    //releaseTB(tb2);
    //releaseTB(tb3);



    return EXIT_SUCCESS;
}
